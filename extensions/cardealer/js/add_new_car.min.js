var app_cardealer_app_add_new_car=null;jQuery(document).ready(function(){app_cardealer_app_add_new_car=new THEMEMAKERS_APP_CARDEALER_ADD_NEW_CAR,app_cardealer_app_add_new_car.init()});var THEMEMAKERS_APP_CARDEALER_ADD_NEW_CAR=function(){var a={car_adv_desc_signs:0,init:function(){a.car_adv_desc_signs=car_adv_desc_signs,jQuery("#thememakers_car_app_add_new_car").on("click",'input[type="submit"]',function(b){b.preventDefault(),a.add()}),jQuery(document.body).on("click",".js_option_checkbox",function(){jQuery(this).is(":checked")?jQuery(this).val(1):jQuery(this).val(0)}),jQuery("#car_adv_desc").bind("keydown input paste",function(){var b=jQuery(this).val(),c=b.length;c>a.car_adv_desc_signs?(b=b.slice(0,a.car_adv_desc_signs),jQuery(this).val(b),jQuery("#car_adv_desc_signs_left").html(0)):jQuery("#car_adv_desc_signs_left").html(a.car_adv_desc_signs-c)}),jQuery(".thememakers_car_app_new_car_block #images_list").on("click","a",function(){return!1})},add:function(){var a=jQuery("#thememakers_car_app_new_car_agreement").is(":checked");if(!a)return alert(tmm_l10n.terms_notice),!1;var b=jQuery('<div id="ballsWaveG" style="margin:60px auto;"><div id="ballsWaveG_1" class="ballsWaveG"></div><div id="ballsWaveG_2" class="ballsWaveG"></div><div id="ballsWaveG_3" class="ballsWaveG"></div><div id="ballsWaveG_4" class="ballsWaveG"></div><div id="ballsWaveG_5" class="ballsWaveG"></div><div id="ballsWaveG_6" class="ballsWaveG"></div><div id="ballsWaveG_7" class="ballsWaveG"></div><div id="ballsWaveG_8" class="ballsWaveG"></div></div>');jQuery(".form-entry").append(b).children().hide(),b.fadeIn(300);var c={action:"app_cardealer_add_car",data:jQuery("#thememakers_car_app_add_new_car").serialize()};return jQuery.post(ajaxurl,c,function(a){0===user_cars_page.length||"#"===user_cars_page?window.location.replace(tmm_l10n.site_url):window.location.replace(user_cars_page)}),!1},next_block:function(a){if(2==a){var b=jQuery('[data-required="1"]'),c=!1,d=jQuery("#car_price"),e=d.val(),f=jQuery("#car_mileage"),g=f.val(),h=jQuery("#car_state").val();if(""!==e&&(e=parseInt(e),e=isNaN(e)!==!0?e:"",d.val(e)),""!==g&&(g=parseInt(g),g=isNaN(g)!==!0?g:"",f.val(g)),b.removeClass("required").each(function(a){var b=jQuery(this),d=b.val(),e=b.attr("id"),g=!1;"car_is_new"===h&&e===f.attr("id")&&(g=!0),g||"none"!=d&&void 0!=d&&""!==d&&"0"!==d||(c=!0,b.addClass("required"))}),c)return show_info_popup(tmm_l10n.required_fields),!1;jQuery(".thememakers_car_app_new_car_block").slideUp(300),jQuery("#thememakers_car_app_new_car_"+a).slideDown(300)}else if(4==a){var i=jQuery("#frame").contents().find(".fileupload_presentation canvas");if(i.length>0)return show_info_popup("Please upload selected images!"),!1;jQuery(".thememakers_car_app_new_car_block").slideUp(300),jQuery("#thememakers_car_app_new_car_"+a).slideDown(300)}else jQuery(".thememakers_car_app_new_car_block").slideUp(300),jQuery("#thememakers_car_app_new_car_"+a).slideDown(300);if(jQuery("li.cart-title").removeClass("step-now"),jQuery("li.cart-title").removeClass("step-success"),jQuery("#head_step"+a).addClass("step-now"),a>1)for(var j=1;j<a;j++)jQuery("#head_step"+j).addClass("step-success")}};return a};